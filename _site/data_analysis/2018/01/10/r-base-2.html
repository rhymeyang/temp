


    



<!-- Include Data Base --> <!DOCTYPE html> <html lang="en" itemscope itemtype="http://schema.org/WebPage"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>R 构建子集 | Vicky's Blog </title> <meta name=description content=""> <meta name="robots" content="index, follow"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta http-equiv="cache-control" content="public"/> <meta http-equiv="pragma" content="public"> <meta name="keywords" content="Theme, Jekyll" /> <meta name="author" content="" /> <meta property="og:locale" content="en" /> <meta property="og:site_name" content="Vicky's Blog" /> <meta property="og:type" content="WebSite" /> <meta property="og:url" content="http://www.forbackup.tk/data_analysis/2018/01/10/r-base-2.html" /> <meta property="og:description" content="" /> <meta property="og:title" content="R 构建子集 - Vicky's Blog" /> <link rel="canonical" href="http://www.forbackup.tk/data_analysis/2018/01/10/r-base-2.html"> <link rel="alternate" type="application/rss+xml" title="Vicky's Blog" href="http://www.forbackup.tk/feed.xml"> <script type="application/ld+json"> {"@context": "http://schema.org", "@type": "WebSite", "name": "", "headline": "Vicky's Blog", "author": {"@type": "Person", "name": {"Vicky's Blog"}}, "description": "", "url": "http://www.forbackup.tk"} </script> <script type="text/javascript"> var GLOBAL_BASEURL = "http://www.forbackup.tk"; </script> <link rel="icon" type="image/png" sizes="16x16" href="http://www.forbackup.tk/assets/img/favicon/favicon-16x16.png"> <!-- #### VENDOR OFFLINE #### --> <!-- Bootstrap 3.3.6 - Offline --> <link rel="stylesheet" href="http://www.forbackup.tk/assets/vendor-off/bootstrap/css/bootstrap.min.css"> <!-- Font Awesome 5.03 - Offline --> <script defer src="http://www.forbackup.tk/assets/vendor-off/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css"></script> <link rel="stylesheet" href="http://www.forbackup.tk/assets/vendor-off/fonts/space-mono/space-mono.min.css"> <link rel="stylesheet" href="http://www.forbackup.tk/assets/vendor-off/fonts/gloria-hallelujah/gloria-hallelujah.min.css"> <!-- Style Default --> <link rel="stylesheet" href="http://www.forbackup.tk/assets/stylesheets/main.css"> <!-- Google Analytics --> </head> <body> <div class="main" id="top"> <div class="container wrapper"> <div class="row"> <div class="col-sm-3 sidebar"> <div class="row avatar"> <a href="http://www.forbackup.tk/"> <img class="img-responsive center-block avatar-img" src="http://www.forbackup.tk/assets/img/avatar/blog.svg" height="165" width="165" alt="Vicky's Blog"> </a> </div> <div class="row header"> <h2><a href="http://www.forbackup.tk/">Vicky </a></h2> </div> <div class="row menu"> <ul> <li> <i class="fa fa-home" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/">Home</a> </li> <hr class="breakline"> <li class="li-folder-open"> <i style="font-size: ;" class="fas fa-folder-open"></i>&nbsp;<a class="unlink">Blog</a> </li> <li class="li-fa-edit"> <i style="font-size: ;" class="fas fa-edit" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/general/" >General</a> </li> <li class="li-fa-docker"> <i style="font-size: ;" class="fab fa-docker" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/docker_col/" >Docker</a> </li> <li class="li-fa-table"> <i style="font-size: ;" class="fas fa-table" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/data_analysis/" >Data Analysis</a> </li> <li class="li-fa-tags"> <i style="font-size: ;" class="fas fa-tags" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/blog/tags/" >Tags</a> </li> <li class="li-fa-briefcase"> <i style="font-size: ;" class="fas fa-briefcase" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/blog/projects/" >Projects</a> </li> </ul> <div class="socials"> <div class="row"> <p></p> <p></p> </div> </div> </div> </div> <div class="col-sm-9 content-main"> <!-- Include Data Base --> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <!-- Next Version <div class="readmode"> <a id="btn-readmode" class="pull-right btn btn-default btn-readmode" href="">Read Mode</a> </div> --> <div class="row title"> <h1>R 构建子集</h1> </div> <div class="row meta" datetime="2018-01-10"> <time class="col-sm-6 datetime"> <i class="fa fa-calendar" aria-hidden="true"></i> <span class="text tmargin ">January 10, 2018</span> </time> </div> <div class="row tag-list"> <i class="fa fa-tags" aria-hidden="true"></i> <a href="http://www.forbackup.tk/blog/tags//r">r</a> <a href="http://www.forbackup.tk/blog/tags//data_analysis">data_analysis</a> </div> <!-- <div class="row"> <ul id="markdown-toc"> <li><a href="#小结" id="markdown-toc-小结">小结</a></li> <li><a href="#构建子集subsetting" id="markdown-toc-构建子集subsetting">构建子集(subsetting)</a></li> <li><a href="#矩阵的子集" id="markdown-toc-矩阵的子集">矩阵的子集</a></li> <li><a href="#dataframe" id="markdown-toc-dataframe">dataframe</a></li> <li><a href="#列表的子集" id="markdown-toc-列表的子集">列表的子集</a></li> <li><a href="#处理缺失值" id="markdown-toc-处理缺失值">处理缺失值</a></li> <li><a href="#complete" id="markdown-toc-complete">complete</a></li> <li><a href="#向量化操作" id="markdown-toc-向量化操作">向量化操作</a></li> </ul> <h2 id="小结">小结</h2> <ul> <li>构建子集 <code class="highlighter-rouge">[]</code>/ <code class="highlighter-rouge">[[]]</code>/<code class="highlighter-rouge">$</code>/<code class="highlighter-rouge">[[]][]</code>/<code class="highlighter-rouge">[[]][[]]</code></li> <li>处理缺失值: <code class="highlighter-rouge">is.na()</code>/<code class="highlighter-rouge">complete.cases()</code></li> <li>向量化操作</li> </ul> <h2 id="构建子集subsetting">构建子集(subsetting)</h2> <ul> <li>原始数据(raw dataset) -&gt; 预处理后的数据(clean dataset)</li> <li>基本方法 <ul> <li><code class="highlighter-rouge">[]</code>: 提取一个或多个同类型相同的元素</li> <li><code class="highlighter-rouge">[[]]</code>: 从列表或数据框中提取元素</li> <li><code class="highlighter-rouge">$</code>:按名字从列表或数据框中提取元素</li> </ul> </li> </ul> <p>R数组下标从 1 开始</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">&lt;</span><span class="m">7</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="m">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">&gt;</span><span class="m">7</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">c</span><span class="w"> 
</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="n">b</span><span class="w"> 
</span><span class="m">2</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="s1">'b'</span><span class="p">]</span><span class="w">
</span><span class="n">b</span><span class="w"> 
</span><span class="m">2</span><span class="w"> </span></code></pre></figure> <h2 id="矩阵的子集">矩阵的子集</h2> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">3</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">3</span><span class="w">    </span><span class="m">5</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">4</span><span class="w">    </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="c1"># 返回的是向量</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">])</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"integer"</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="c1"># 关闭返回向量，返回是矩阵</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">]</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">3</span></code></pre></figure> <h2 id="dataframe">dataframe</h2> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">v</span><span class="m">1</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="o">=</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="o">=</span><span class="m">11</span><span class="o">:</span><span class="m">15</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w">
</span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">12</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">14</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">3</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w">
</span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[,</span><span class="s1">'v2'</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&lt;</span><span class="m">4</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">2</span><span class="o">&gt;=</span><span class="m">8</span><span class="p">),]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&lt;</span><span class="m">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">2</span><span class="o">&gt;=</span><span class="m">8</span><span class="p">),]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w">
</span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="o">&gt;</span><span class="m">2</span><span class="p">,]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="c1">#得到具体行数</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="p">),]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">which</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="p">)</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span></code></pre></figure> <h2 id="列表的子集">列表的子集</h2> <ul> <li><code class="highlighter-rouge">[[]]</code>/ <code class="highlighter-rouge">$</code>/ <code class="highlighter-rouge">[[]][]</code>/ <code class="highlighter-rouge">[[]][[]]</code></li> <li>嵌套列表/不完全匹配(partial matching)</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">170</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s1">'male'</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">$</span><span class="n">height</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">170</span><span class="w">

</span><span class="o">$</span><span class="n">gender</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"male"</span></code></pre></figure> <ul> <li>列表有单括号，只能拿到对应元素的名字和内容 单括号不能拿到纯内容</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span></code></pre></figure> <ul> <li>拿到列表内容 <ul> <li>双括号, index/name</li> <li><code class="highlighter-rouge">$</code></li> </ul> </li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># 双括号</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="s1">'id'</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="c1"># $</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="c1"># 多个元素</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">$</span><span class="n">gender</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"male"</span><span class="w">


</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'id'</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="s1">'id'</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="n">y</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">y</span><span class="w">
</span><span class="kc">NULL</span></code></pre></figure> <ul> <li>嵌套元素</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># 嵌套元素</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s1">'Monday'</span><span class="p">,</span><span class="s1">'Tuesday'</span><span class="p">))</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="o">$</span><span class="n">a</span><span class="w">
</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">3</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">4</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">4</span><span class="w">


</span><span class="o">$</span><span class="n">b</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"Monday"</span><span class="w">  </span><span class="s2">"Tuesday"</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="p">[[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="p">[[</span><span class="m">3</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="p">[[</span><span class="m">4</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]][[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">2</span><span class="p">)]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"Tuesday"</span></code></pre></figure> <ul> <li>不完全匹配</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># 不完全匹配</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">asdfghj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="o">$</span><span class="n">asdfghj</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="o">$</span><span class="n">a</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">[[</span><span class="s1">'a'</span><span class="p">]]</span><span class="w">
</span><span class="kc">NULL</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">[[</span><span class="s1">'a'</span><span class="p">,</span><span class="n">exact</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">]]</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">asdfghj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">aaa</span><span class="o">=</span><span class="m">3</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="o">$</span><span class="n">asdfghj</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">

</span><span class="o">$</span><span class="n">b</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="o">$</span><span class="n">aaa</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">a</span><span class="w">
</span><span class="kc">NULL</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="n">exact</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">]]</span><span class="w">
</span><span class="kc">NULL</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">as</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span></code></pre></figure> <h2 id="处理缺失值">处理缺失值</h2> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="kc">NA</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="kc">NA</span><span class="p">,</span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">complete.cases</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"a"</span><span class="w"> </span><span class="s2">"3"</span></code></pre></figure> <h2 id="complete">complete</h2> <p>complete加载包中数据集</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">head</span><span class="p">(</span><span class="n">airquality</span><span class="p">)</span><span class="w">
  </span><span class="n">Ozone</span><span class="w"> </span><span class="n">Solar.R</span><span class="w"> </span><span class="n">Wind</span><span class="w"> </span><span class="n">Temp</span><span class="w"> </span><span class="n">Month</span><span class="w"> </span><span class="n">Day</span><span class="w">
</span><span class="m">1</span><span class="w">    </span><span class="m">41</span><span class="w">     </span><span class="m">190</span><span class="w">  </span><span class="m">7.4</span><span class="w">   </span><span class="m">67</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">1</span><span class="w">
</span><span class="m">2</span><span class="w">    </span><span class="m">36</span><span class="w">     </span><span class="m">118</span><span class="w">  </span><span class="m">8.0</span><span class="w">   </span><span class="m">72</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">2</span><span class="w">
</span><span class="m">3</span><span class="w">    </span><span class="m">12</span><span class="w">     </span><span class="m">149</span><span class="w"> </span><span class="m">12.6</span><span class="w">   </span><span class="m">74</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">3</span><span class="w">
</span><span class="m">4</span><span class="w">    </span><span class="m">18</span><span class="w">     </span><span class="m">313</span><span class="w"> </span><span class="m">11.5</span><span class="w">   </span><span class="m">62</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">4</span><span class="w">
</span><span class="m">5</span><span class="w">    </span><span class="kc">NA</span><span class="w">      </span><span class="kc">NA</span><span class="w"> </span><span class="m">14.3</span><span class="w">   </span><span class="m">56</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">5</span><span class="w">
</span><span class="m">6</span><span class="w">    </span><span class="m">28</span><span class="w">      </span><span class="kc">NA</span><span class="w"> </span><span class="m">14.9</span><span class="w">   </span><span class="m">66</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">complete.cases</span><span class="p">(</span><span class="n">airquality</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">g</span><span class="w">
  </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">19</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">28</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">37</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">46</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">55</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">64</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">73</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">82</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">91</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">100</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">109</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">118</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">127</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">136</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">145</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">airquality</span><span class="p">[</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="p">][</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,]</span><span class="w">
   </span><span class="n">Ozone</span><span class="w"> </span><span class="n">Solar.R</span><span class="w"> </span><span class="n">Wind</span><span class="w"> </span><span class="n">Temp</span><span class="w"> </span><span class="n">Month</span><span class="w"> </span><span class="n">Day</span><span class="w">
</span><span class="m">1</span><span class="w">     </span><span class="m">41</span><span class="w">     </span><span class="m">190</span><span class="w">  </span><span class="m">7.4</span><span class="w">   </span><span class="m">67</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">1</span><span class="w">
</span><span class="m">2</span><span class="w">     </span><span class="m">36</span><span class="w">     </span><span class="m">118</span><span class="w">  </span><span class="m">8.0</span><span class="w">   </span><span class="m">72</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">2</span><span class="w">
</span><span class="m">3</span><span class="w">     </span><span class="m">12</span><span class="w">     </span><span class="m">149</span><span class="w"> </span><span class="m">12.6</span><span class="w">   </span><span class="m">74</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">3</span><span class="w">
</span><span class="m">4</span><span class="w">     </span><span class="m">18</span><span class="w">     </span><span class="m">313</span><span class="w"> </span><span class="m">11.5</span><span class="w">   </span><span class="m">62</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">4</span><span class="w">
</span><span class="m">7</span><span class="w">     </span><span class="m">23</span><span class="w">     </span><span class="m">299</span><span class="w">  </span><span class="m">8.6</span><span class="w">   </span><span class="m">65</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">7</span><span class="w">
</span><span class="m">8</span><span class="w">     </span><span class="m">19</span><span class="w">      </span><span class="m">99</span><span class="w"> </span><span class="m">13.8</span><span class="w">   </span><span class="m">59</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">8</span><span class="w">
</span><span class="m">9</span><span class="w">      </span><span class="m">8</span><span class="w">      </span><span class="m">19</span><span class="w"> </span><span class="m">20.1</span><span class="w">   </span><span class="m">61</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">9</span><span class="w">
</span><span class="m">12</span><span class="w">    </span><span class="m">16</span><span class="w">     </span><span class="m">256</span><span class="w">  </span><span class="m">9.7</span><span class="w">   </span><span class="m">69</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="m">12</span><span class="w">
</span><span class="m">13</span><span class="w">    </span><span class="m">11</span><span class="w">     </span><span class="m">290</span><span class="w">  </span><span class="m">9.2</span><span class="w">   </span><span class="m">66</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="m">13</span><span class="w">
</span><span class="m">14</span><span class="w">    </span><span class="m">14</span><span class="w">     </span><span class="m">274</span><span class="w"> </span><span class="m">10.9</span><span class="w">   </span><span class="m">68</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="m">14</span></code></pre></figure> <h2 id="向量化操作">向量化操作</h2> <ul> <li>向量化操作(vectorized operation) <ul> <li>可以作用于向量、矩阵等结构，使代码简洁、易于阅读</li> </ul> </li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">50</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">/</span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">0.1666667</span><span class="w"> </span><span class="m">0.2857143</span><span class="w"> </span><span class="m">0.3750000</span><span class="w"> </span><span class="m">0.4444444</span><span class="w"> </span><span class="m">0.5000000</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="n">nrow</span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">3</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">2</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">2</span></code></pre></figure> <p>矩阵乘</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">%*%</span><span class="n">y</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">8</span><span class="w">    </span><span class="m">8</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">   </span><span class="m">12</span><span class="w">   </span><span class="m">12</span></code></pre></figure> 5528 </div> --> <div class="row content"> <ul id="markdown-toc"> <li><a href="#小结" id="markdown-toc-小结">小结</a></li> <li><a href="#构建子集subsetting" id="markdown-toc-构建子集subsetting">构建子集(subsetting)</a></li> <li><a href="#矩阵的子集" id="markdown-toc-矩阵的子集">矩阵的子集</a></li> <li><a href="#dataframe" id="markdown-toc-dataframe">dataframe</a></li> <li><a href="#列表的子集" id="markdown-toc-列表的子集">列表的子集</a></li> <li><a href="#处理缺失值" id="markdown-toc-处理缺失值">处理缺失值</a></li> <li><a href="#complete" id="markdown-toc-complete">complete</a></li> <li><a href="#向量化操作" id="markdown-toc-向量化操作">向量化操作</a></li> </ul> <h2 id="小结">小结</h2> <ul> <li>构建子集 <code class="highlighter-rouge">[]</code>/ <code class="highlighter-rouge">[[]]</code>/<code class="highlighter-rouge">$</code>/<code class="highlighter-rouge">[[]][]</code>/<code class="highlighter-rouge">[[]][[]]</code></li> <li>处理缺失值: <code class="highlighter-rouge">is.na()</code>/<code class="highlighter-rouge">complete.cases()</code></li> <li>向量化操作</li> </ul> <h2 id="构建子集subsetting">构建子集(subsetting)</h2> <ul> <li>原始数据(raw dataset) -&gt; 预处理后的数据(clean dataset)</li> <li>基本方法 <ul> <li><code class="highlighter-rouge">[]</code>: 提取一个或多个同类型相同的元素</li> <li><code class="highlighter-rouge">[[]]</code>: 从列表或数据框中提取元素</li> <li><code class="highlighter-rouge">$</code>:按名字从列表或数据框中提取元素</li> </ul> </li> </ul> <p>R数组下标从 1 开始</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">5</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">&gt;</span><span class="m">5</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">&lt;</span><span class="m">7</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">&lt;</span><span class="m">3</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">&gt;</span><span class="m">7</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">names</span><span class="p">(</span><span class="n">y</span><span class="p">)</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">
</span><span class="n">a</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="n">c</span><span class="w"> </span><span class="n">c</span><span class="w"> 
</span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="n">b</span><span class="w"> 
</span><span class="m">2</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="s1">'b'</span><span class="p">]</span><span class="w">
</span><span class="n">b</span><span class="w"> 
</span><span class="m">2</span><span class="w"> </span></code></pre></figure> <h2 id="矩阵的子集">矩阵的子集</h2> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">6</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">3</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">3</span><span class="w">    </span><span class="m">5</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">4</span><span class="w">    </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="c1"># 返回的是向量</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">class</span><span class="p">(</span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">])</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"integer"</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="c1"># 关闭返回向量，返回是矩阵</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">drop</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">]</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">3</span></code></pre></figure> <h2 id="dataframe">dataframe</h2> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">data.frame</span><span class="p">(</span><span class="n">v</span><span class="m">1</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="o">=</span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="o">=</span><span class="m">11</span><span class="o">:</span><span class="m">15</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w">
</span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="m">12</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">14</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">3</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">)]</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w">
</span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[,</span><span class="s1">'v2'</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&lt;</span><span class="m">4</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">2</span><span class="o">&gt;=</span><span class="m">8</span><span class="p">),]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&lt;</span><span class="m">4</span><span class="w"> </span><span class="o">|</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">2</span><span class="o">&gt;=</span><span class="m">8</span><span class="p">),]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">1</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">11</span><span class="w">
</span><span class="m">2</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">7</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="o">&gt;</span><span class="m">2</span><span class="p">,]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="c1">#得到具体行数</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">which</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="p">),]</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">which</span><span class="p">(</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">subset</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">x</span><span class="o">$</span><span class="n">v</span><span class="m">1</span><span class="o">&gt;</span><span class="m">2</span><span class="p">)</span><span class="w">
  </span><span class="n">v</span><span class="m">1</span><span class="w"> </span><span class="n">v</span><span class="m">2</span><span class="w"> </span><span class="n">v</span><span class="m">3</span><span class="w">
</span><span class="m">3</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">8</span><span class="w"> </span><span class="m">13</span><span class="w">
</span><span class="m">4</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="kc">NA</span><span class="w">
</span><span class="m">5</span><span class="w">  </span><span class="m">5</span><span class="w"> </span><span class="m">10</span><span class="w"> </span><span class="m">15</span></code></pre></figure> <h2 id="列表的子集">列表的子集</h2> <ul> <li><code class="highlighter-rouge">[[]]</code>/ <code class="highlighter-rouge">$</code>/ <code class="highlighter-rouge">[[]][]</code>/ <code class="highlighter-rouge">[[]][[]]</code></li> <li>嵌套列表/不完全匹配(partial matching)</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">id</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">170</span><span class="p">,</span><span class="w"> </span><span class="n">gender</span><span class="o">=</span><span class="s1">'male'</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">$</span><span class="n">height</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">170</span><span class="w">

</span><span class="o">$</span><span class="n">gender</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"male"</span></code></pre></figure> <ul> <li>列表有单括号，只能拿到对应元素的名字和内容 单括号不能拿到纯内容</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="s1">'id'</span><span class="p">]</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span></code></pre></figure> <ul> <li>拿到列表内容 <ul> <li>双括号, index/name</li> <li><code class="highlighter-rouge">$</code></li> </ul> </li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># 双括号</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="s1">'id'</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="c1"># $</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="c1"># 多个元素</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]</span><span class="w">
</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">$</span><span class="n">gender</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"male"</span><span class="w">


</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="s1">'id'</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="s1">'id'</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="n">y</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">id</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">y</span><span class="w">
</span><span class="kc">NULL</span></code></pre></figure> <ul> <li>嵌套元素</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># 嵌套元素</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">a</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">,</span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s1">'Monday'</span><span class="p">,</span><span class="s1">'Tuesday'</span><span class="p">))</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="o">$</span><span class="n">a</span><span class="w">
</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">3</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="o">$</span><span class="n">a</span><span class="p">[[</span><span class="m">4</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">4</span><span class="w">


</span><span class="o">$</span><span class="n">b</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"Monday"</span><span class="w">  </span><span class="s2">"Tuesday"</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w">

</span><span class="p">[[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="p">[[</span><span class="m">3</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">

</span><span class="p">[[</span><span class="m">4</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">4</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]][[</span><span class="m">2</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="m">1</span><span class="p">]][</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[[</span><span class="m">1</span><span class="p">]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">3</span><span class="p">)]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">2</span><span class="p">)]]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"Tuesday"</span></code></pre></figure> <ul> <li>不完全匹配</li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="c1"># 不完全匹配</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">asdfghj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="o">$</span><span class="n">asdfghj</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="o">$</span><span class="n">a</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">[[</span><span class="s1">'a'</span><span class="p">]]</span><span class="w">
</span><span class="kc">NULL</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">l</span><span class="p">[[</span><span class="s1">'a'</span><span class="p">,</span><span class="n">exact</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">]]</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">asdfghj</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,</span><span class="w"> </span><span class="n">b</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">aaa</span><span class="o">=</span><span class="m">3</span><span class="o">:</span><span class="m">5</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
</span><span class="o">$</span><span class="n">asdfghj</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span><span class="w">

</span><span class="o">$</span><span class="n">b</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w">

</span><span class="o">$</span><span class="n">aaa</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">3</span><span class="w"> </span><span class="m">4</span><span class="w"> </span><span class="m">5</span><span class="w">

</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">a</span><span class="w">
</span><span class="kc">NULL</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[[</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="n">exact</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">]]</span><span class="w">
</span><span class="kc">NULL</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">$</span><span class="n">as</span><span class="w">
 </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">1</span><span class="w">  </span><span class="m">2</span><span class="w">  </span><span class="m">3</span><span class="w">  </span><span class="m">4</span><span class="w">  </span><span class="m">5</span><span class="w">  </span><span class="m">6</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">8</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">10</span></code></pre></figure> <h2 id="处理缺失值">处理缺失值</h2> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="kc">NA</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="kc">NA</span><span class="p">,</span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">x</span><span class="p">)]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">2</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s1">'a'</span><span class="p">,</span><span class="w"> </span><span class="s1">'b'</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="s1">'c'</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">z</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">complete.cases</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="m">3</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="p">[</span><span class="n">z</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="s2">"a"</span><span class="w"> </span><span class="s2">"3"</span></code></pre></figure> <h2 id="complete">complete</h2> <p>complete加载包中数据集</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">library</span><span class="p">(</span><span class="n">datasets</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">head</span><span class="p">(</span><span class="n">airquality</span><span class="p">)</span><span class="w">
  </span><span class="n">Ozone</span><span class="w"> </span><span class="n">Solar.R</span><span class="w"> </span><span class="n">Wind</span><span class="w"> </span><span class="n">Temp</span><span class="w"> </span><span class="n">Month</span><span class="w"> </span><span class="n">Day</span><span class="w">
</span><span class="m">1</span><span class="w">    </span><span class="m">41</span><span class="w">     </span><span class="m">190</span><span class="w">  </span><span class="m">7.4</span><span class="w">   </span><span class="m">67</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">1</span><span class="w">
</span><span class="m">2</span><span class="w">    </span><span class="m">36</span><span class="w">     </span><span class="m">118</span><span class="w">  </span><span class="m">8.0</span><span class="w">   </span><span class="m">72</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">2</span><span class="w">
</span><span class="m">3</span><span class="w">    </span><span class="m">12</span><span class="w">     </span><span class="m">149</span><span class="w"> </span><span class="m">12.6</span><span class="w">   </span><span class="m">74</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">3</span><span class="w">
</span><span class="m">4</span><span class="w">    </span><span class="m">18</span><span class="w">     </span><span class="m">313</span><span class="w"> </span><span class="m">11.5</span><span class="w">   </span><span class="m">62</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">4</span><span class="w">
</span><span class="m">5</span><span class="w">    </span><span class="kc">NA</span><span class="w">      </span><span class="kc">NA</span><span class="w"> </span><span class="m">14.3</span><span class="w">   </span><span class="m">56</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">5</span><span class="w">
</span><span class="m">6</span><span class="w">    </span><span class="m">28</span><span class="w">      </span><span class="kc">NA</span><span class="w"> </span><span class="m">14.9</span><span class="w">   </span><span class="m">66</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">6</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">g</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">complete.cases</span><span class="p">(</span><span class="n">airquality</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">g</span><span class="w">
  </span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">10</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">19</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">28</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">37</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">46</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">55</span><span class="p">]</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">64</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">
 </span><span class="p">[</span><span class="m">73</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">82</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
 </span><span class="p">[</span><span class="m">91</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">100</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">109</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">118</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">127</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">136</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="p">[</span><span class="m">145</span><span class="p">]</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w"> </span><span class="kc">FALSE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">  </span><span class="kc">TRUE</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">airquality</span><span class="p">[</span><span class="n">g</span><span class="p">,</span><span class="w"> </span><span class="p">][</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">,]</span><span class="w">
   </span><span class="n">Ozone</span><span class="w"> </span><span class="n">Solar.R</span><span class="w"> </span><span class="n">Wind</span><span class="w"> </span><span class="n">Temp</span><span class="w"> </span><span class="n">Month</span><span class="w"> </span><span class="n">Day</span><span class="w">
</span><span class="m">1</span><span class="w">     </span><span class="m">41</span><span class="w">     </span><span class="m">190</span><span class="w">  </span><span class="m">7.4</span><span class="w">   </span><span class="m">67</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">1</span><span class="w">
</span><span class="m">2</span><span class="w">     </span><span class="m">36</span><span class="w">     </span><span class="m">118</span><span class="w">  </span><span class="m">8.0</span><span class="w">   </span><span class="m">72</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">2</span><span class="w">
</span><span class="m">3</span><span class="w">     </span><span class="m">12</span><span class="w">     </span><span class="m">149</span><span class="w"> </span><span class="m">12.6</span><span class="w">   </span><span class="m">74</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">3</span><span class="w">
</span><span class="m">4</span><span class="w">     </span><span class="m">18</span><span class="w">     </span><span class="m">313</span><span class="w"> </span><span class="m">11.5</span><span class="w">   </span><span class="m">62</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">4</span><span class="w">
</span><span class="m">7</span><span class="w">     </span><span class="m">23</span><span class="w">     </span><span class="m">299</span><span class="w">  </span><span class="m">8.6</span><span class="w">   </span><span class="m">65</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">7</span><span class="w">
</span><span class="m">8</span><span class="w">     </span><span class="m">19</span><span class="w">      </span><span class="m">99</span><span class="w"> </span><span class="m">13.8</span><span class="w">   </span><span class="m">59</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">8</span><span class="w">
</span><span class="m">9</span><span class="w">      </span><span class="m">8</span><span class="w">      </span><span class="m">19</span><span class="w"> </span><span class="m">20.1</span><span class="w">   </span><span class="m">61</span><span class="w">     </span><span class="m">5</span><span class="w">   </span><span class="m">9</span><span class="w">
</span><span class="m">12</span><span class="w">    </span><span class="m">16</span><span class="w">     </span><span class="m">256</span><span class="w">  </span><span class="m">9.7</span><span class="w">   </span><span class="m">69</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="m">12</span><span class="w">
</span><span class="m">13</span><span class="w">    </span><span class="m">11</span><span class="w">     </span><span class="m">290</span><span class="w">  </span><span class="m">9.2</span><span class="w">   </span><span class="m">66</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="m">13</span><span class="w">
</span><span class="m">14</span><span class="w">    </span><span class="m">14</span><span class="w">     </span><span class="m">274</span><span class="w"> </span><span class="m">10.9</span><span class="w">   </span><span class="m">68</span><span class="w">     </span><span class="m">5</span><span class="w">  </span><span class="m">14</span></code></pre></figure> <h2 id="向量化操作">向量化操作</h2> <ul> <li>向量化操作(vectorized operation) <ul> <li>可以作用于向量、矩阵等结构，使代码简洁、易于阅读</li> </ul> </li> </ul> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="m">6</span><span class="o">:</span><span class="m">10</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">+</span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">7</span><span class="w">  </span><span class="m">9</span><span class="w"> </span><span class="m">11</span><span class="w"> </span><span class="m">13</span><span class="w"> </span><span class="m">15</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">*</span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w">  </span><span class="m">6</span><span class="w"> </span><span class="m">14</span><span class="w"> </span><span class="m">24</span><span class="w"> </span><span class="m">36</span><span class="w"> </span><span class="m">50</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">/</span><span class="n">y</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="m">0.1666667</span><span class="w"> </span><span class="m">0.2857143</span><span class="w"> </span><span class="m">0.3750000</span><span class="w"> </span><span class="m">0.4444444</span><span class="w"> </span><span class="m">0.5000000</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> 
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">4</span><span class="p">,</span><span class="w"> </span><span class="n">nrow</span><span class="w"> </span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="w"> </span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">matrix</span><span class="p">(</span><span class="nf">rep</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="n">nrow</span><span class="o">=</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="n">ncol</span><span class="o">=</span><span class="m">2</span><span class="p">)</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">1</span><span class="w">    </span><span class="m">3</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">4</span><span class="w">
</span><span class="o">&gt;</span><span class="w"> </span><span class="n">y</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">2</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">    </span><span class="m">2</span><span class="w">    </span><span class="m">2</span></code></pre></figure> <p>矩阵乘</p> <figure class="highlight"><pre><code class="language-r" data-lang="r"><span class="o">&gt;</span><span class="w"> </span><span class="n">x</span><span class="o">%*%</span><span class="n">y</span><span class="w">
     </span><span class="p">[,</span><span class="m">1</span><span class="p">]</span><span class="w"> </span><span class="p">[,</span><span class="m">2</span><span class="p">]</span><span class="w">
</span><span class="p">[</span><span class="m">1</span><span class="p">,]</span><span class="w">    </span><span class="m">8</span><span class="w">    </span><span class="m">8</span><span class="w">
</span><span class="p">[</span><span class="m">2</span><span class="p">,]</span><span class="w">   </span><span class="m">12</span><span class="w">   </span><span class="m">12</span></code></pre></figure> <div class="col-sm-2 image pull-right"> <img class="avatar-img avata" style='border="0";border-radius: 50%' src="http://www.forbackup.tk/assets/img/author/blog.svg" alt="" height="32px" width="32px"> </div> </div> <ul class="pager"> <li><a href="/data_analysis/2018/01/10/r-base-1.html">R 数据结构</a></li> <li><a href="/data_analysis/2018/01/10/r-base-3.html">R 重要函数1</a></li> </ul> </article> </div> </div> </div> <div class="footer"> <div class="container-fluid"> <div class="row-fluid"> <div class="col-sm-4 copyright"> <span>Vicky's Blog © 2018 • All right reserved.</span> </div> <div class="col-sm-4 message"> <span>Simplicity is fashionable.</span> </div> <div class="col-sm-4 madeby"> <span>Made with&nbsp;<a href="https://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;by&nbsp;Vicky.</span> </div> <a class="pull-right top" href="#top"><i class="fa fa-caret-up" aria-hidden="true"></i></a> </div> </div> </div> </div> <!-- Vendor - Global | Applicable to every website --> <!-- #### VENDOR OFFLINE #### --> <script src="http://www.forbackup.tk/assets/vendor-off/jquery/js/jquery.min.js"></script> <script src="http://www.forbackup.tk/assets/vendor-off/bootstrap/js/bootstrap.min.js"></script> <script defer src="http://www.forbackup.tk/assets/vendor-off/font-awesome/svg-with-js/js/fontawesome-all.min.js"></script> <script src="http://www.forbackup.tk/assets/javascripts/jekyll-spotify-plugin.min.js"></script> <!-- Specific for each pages. --> <script type="text/javascript" src="http://www.forbackup.tk/assets/javascripts/post.js"></script> <!-- Add 'ga' function from Google Analytics to certain site links in Posts --> <!-- App | Global --> <script src="http://www.forbackup.tk/assets/javascripts/global.js"></script> </body> </html>




    



<!-- Include Data Base --> <!DOCTYPE html> <html lang="en" itemscope itemtype="http://schema.org/WebPage"> <head> <meta charset="utf-8"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title>git 命令 | Vicky's Blog </title> <meta name=description content=""> <meta name="robots" content="index, follow"> <meta name=viewport content="width=device-width, initial-scale=1"> <meta http-equiv="cache-control" content="public"/> <meta http-equiv="pragma" content="public"> <meta name="keywords" content="Theme, Jekyll" /> <meta name="author" content="" /> <meta property="og:locale" content="en" /> <meta property="og:site_name" content="Vicky's Blog" /> <meta property="og:type" content="WebSite" /> <meta property="og:url" content="http://www.forbackup.tk/general/2018/01/01/git-manual.html" /> <meta property="og:description" content="" /> <meta property="og:title" content="git 命令 - Vicky's Blog" /> <link rel="canonical" href="http://www.forbackup.tk/general/2018/01/01/git-manual.html"> <link rel="alternate" type="application/rss+xml" title="Vicky's Blog" href="http://www.forbackup.tk/feed.xml"> <script type="application/ld+json"> {"@context": "http://schema.org", "@type": "WebSite", "name": "", "headline": "Vicky's Blog", "author": {"@type": "Person", "name": {"Vicky's Blog"}}, "description": "", "url": "http://www.forbackup.tk"} </script> <script type="text/javascript"> var GLOBAL_BASEURL = "http://www.forbackup.tk"; </script> <link rel="icon" type="image/png" sizes="16x16" href="http://www.forbackup.tk/assets/img/favicon/favicon-16x16.png"> <!-- #### VENDOR OFFLINE #### --> <!-- Bootstrap 3.3.6 - Offline --> <link rel="stylesheet" href="http://www.forbackup.tk/assets/vendor-off/bootstrap/css/bootstrap.min.css"> <!-- Font Awesome 5.03 - Offline --> <script defer src="http://www.forbackup.tk/assets/vendor-off/font-awesome/web-fonts-with-css/css/fontawesome-all.min.css"></script> <link rel="stylesheet" href="http://www.forbackup.tk/assets/vendor-off/fonts/space-mono/space-mono.min.css"> <link rel="stylesheet" href="http://www.forbackup.tk/assets/vendor-off/fonts/gloria-hallelujah/gloria-hallelujah.min.css"> <!-- Style Default --> <link rel="stylesheet" href="http://www.forbackup.tk/assets/stylesheets/main.css"> <!-- Google Analytics --> </head> <body> <div class="main" id="top"> <div class="container wrapper"> <div class="row"> <div class="col-sm-3 sidebar"> <div class="row avatar"> <a href="http://www.forbackup.tk/"> <img class="img-responsive center-block avatar-img" src="http://www.forbackup.tk/assets/img/avatar/blog.svg" height="165" width="165" alt="Vicky's Blog"> </a> </div> <div class="row header"> <h2><a href="http://www.forbackup.tk/">Vicky </a></h2> </div> <div class="row menu"> <ul> <li> <i class="fa fa-home" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/">Home</a> </li> <hr class="breakline"> <li class="li-folder-open"> <i style="font-size: ;" class="fas fa-folder-open"></i>&nbsp;<a class="unlink">Blog</a> </li> <li class="li-fa-edit"> <i style="font-size: ;" class="fas fa-edit" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/general/" >General</a> </li> <li class="li-fa-docker"> <i style="font-size: ;" class="fab fa-docker" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/docker_col/" >Docker</a> </li> <li class="li-fa-table"> <i style="font-size: ;" class="fas fa-table" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/data_analysis/" >Data Analysis</a> </li> <li class="li-fa-tags"> <i style="font-size: ;" class="fas fa-tags" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/blog/tags/" >Tags</a> </li> <li class="li-fa-briefcase"> <i style="font-size: ;" class="fas fa-briefcase" aria-hidden="true"></i>&nbsp;<a href="http://www.forbackup.tk/blog/projects/" >Projects</a> </li> </ul> <div class="socials"> <div class="row"> <p></p> <p></p> </div> </div> </div> </div> <div class="col-sm-9 content-main"> <!-- Include Data Base --> <article class="post" itemscope itemtype="http://schema.org/BlogPosting"> <!-- Next Version <div class="readmode"> <a id="btn-readmode" class="pull-right btn btn-default btn-readmode" href="">Read Mode</a> </div> --> <div class="row title"> <h1>git 命令</h1> </div> <div class="row meta" datetime="2018-01-01"> <time class="col-sm-6 datetime"> <i class="fa fa-calendar" aria-hidden="true"></i> <span class="text tmargin ">January 01, 2018</span> </time> </div> <div class="row tag-list"> <i class="fa fa-tags" aria-hidden="true"></i> <a href="http://www.forbackup.tk/blog/tags//环境配置">环境配置</a> <a href="http://www.forbackup.tk/blog/tags//常用命令">常用命令</a> <a href="http://www.forbackup.tk/blog/tags//git">git</a> </div> <!-- <div class="row"> <ul id="markdown-toc"> <li><a href="#git-hooks" id="markdown-toc-git-hooks">Git Hooks</a> <ul> <li><a href="#git-rev-parse-命令" id="markdown-toc-git-rev-parse-命令">git rev-parse 命令</a> <ul> <li><a href="#特殊符号" id="markdown-toc-特殊符号">特殊符号</a></li> </ul> </li> <li><a href="#二分查找" id="markdown-toc-二分查找">二分查找</a> <ul> <li><a href="#批处理" id="markdown-toc-批处理">批处理</a></li> </ul> </li> <li><a href="#稀疏校验" id="markdown-toc-稀疏校验">稀疏校验</a></li> <li><a href="#shallow-clone" id="markdown-toc-shallow-clone">shallow clone</a></li> <li><a href="#参考" id="markdown-toc-参考">参考</a> <ul> <li><a href="#document" id="markdown-toc-document">document</a></li> <li><a href="#备份" id="markdown-toc-备份">备份</a></li> </ul> </li> </ul> </li> </ul> <h1 id="git-hooks">Git Hooks</h1> <ul> <li>Client side <ul> <li>triggered by operations such as committing and merging</li> </ul> </li> <li>Server Side <ul> <li>triggered by network operations such as receiving pushed commits</li> </ul> </li> <li>hook language <ul> <li>ruby, python, shell, …</li> </ul> </li> <li>Creat Hook <ul> <li>目录 hooks</li> <li>客户端的hook不好管理，一般需要手动copy，可以使用grunt</li> </ul> </li> <li>Grunt is a task runner <ul> <li>可以管理 hooks</li> </ul> </li> </ul> <p>可以使用符号链接将hooks文件纳入管理</p> <p>文件必须设置可执行权限</p> <h2 id="git-rev-parse-命令">git rev-parse 命令</h2> <ul> <li><code class="highlighter-rouge">git rev-parse --git-dir</code> : 版本库.git命令所在的位置 <ul> <li><code class="highlighter-rouge">git rev-parse --git-common-dir</code> : 如果<code class="highlighter-rouge">GIT_COMMON_DIR</code>变量定义了则展示<code class="highlighter-rouge">GIT_COMMON_DIR</code>变量的值，不然则展示<code class="highlighter-rouge">GIT_DIR</code>变量的值</li> </ul> </li> <li><code class="highlighter-rouge">git rev-parse --show-toplevel</code> : 显示工作区根目录</li> <li><code class="highlighter-rouge">git rev-parse --show-prefix</code>: 显示相对于工作区根目录的相对路径</li> <li><code class="highlighter-rouge">git rev-parse --show-cdup</code> : 显示从当前目录(cd)后退(up)到工作区的根目录的深度</li> <li><code class="highlighter-rouge">git rev-parse --local-env-vars</code>: 显示git环境变量列表的本地库,只列出变量的名称，而不是它们的值</li> <li><code class="highlighter-rouge">git rev-parse --symbolic --branches</code>: 显示分支</li> <li><code class="highlighter-rouge">git rev-parse --symbolic --tags</code>: 显示 TAG</li> <li> <p><code class="highlighter-rouge">git rev-parse HEAD</code>: 显示HEAD提交的SHA1值</p> </li> <li><code class="highlighter-rouge">git rev-parse &lt;branch&gt;</code></li> <li><code class="highlighter-rouge">git rev-parse HEAD</code></li> <li><code class="highlighter-rouge">git rev-parse HEAD~5</code></li> </ul> <h3 id="特殊符号">特殊符号</h3> <p><code class="highlighter-rouge">git log --graph --oneline</code></p> <ul> <li><code class="highlighter-rouge">&lt;rev&gt;~&lt;n&gt;</code> 用来表示一个提交的第 n 个祖先提交，如果不指定 n，那么默认为 1 <ul> <li><code class="highlighter-rouge">HEAD~~~</code> 和 <code class="highlighter-rouge">HEAD~3</code> 是等价的</li> </ul> </li> <li><code class="highlighter-rouge">&lt;rev&gt;^&lt;n&gt;</code> 用来表示一个提交的第 n 个父提交，如果不指定 n，那么默认为 1 <ul> <li><code class="highlighter-rouge">HEAD^^^</code> 并不等价于 <code class="highlighter-rouge">HEAD^3</code>，而是等价与 <code class="highlighter-rouge">HEAD^1^1^1</code></li> </ul> </li> <li><code class="highlighter-rouge">git rev-parse HEAD</code> <ul> <li><code class="highlighter-rouge">git rev-parse HEAD~0</code></li> </ul> </li> <li><code class="highlighter-rouge">git rev-parse HEAD~1</code></li> </ul> <p>如果节点有多个父节点，<code class="highlighter-rouge">~</code> 只会找到第一个父提交</p> <p><code class="highlighter-rouge">~</code> 获取第一个祖先提交，<code class="highlighter-rouge">^</code> 可以获取第一个父提交</p> <p>其实第一个祖先提交就是第一个父提交，反之亦然。</p> <p>因此，当 n 为 1 时，<code class="highlighter-rouge">~</code> 和 <code class="highlighter-rouge">^</code> 其实是等价的。<code class="highlighter-rouge">HEAD~~~</code> 和 <code class="highlighter-rouge">HEAD^^^</code> 等价。</p> <ul> <li><a href="https://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html">git-rev-parse Manual Page</a></li> <li><a href="https://stackoverflow.com/questions/2221658/whats-the-difference-between-head-and-head-in-git">stackoverflow - difference between head</a></li> </ul> <h2 id="二分查找">二分查找</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git bisect start
git bisect good &lt;good_tag&gt;
git bisect bad &lt;bad_tag&gt;
</code></pre></div></div> <ul> <li>当完成对一个好版本和一个坏版本的标记后，Git 切换到一个中间版本</li> <li>测试</li> <li>根据结果标记 good or bad</li> </ul> <h3 id="批处理">批处理</h3> <ul> <li>正确执行的返回值是 0</li> <li>错误执行的返回值是 128</li> </ul> <p>git_test.sh</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

make <span class="nt">-j8</span> <span class="o">&amp;&amp;</span> make <span class="nb">install</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
git <span class="nt">--version</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nv">http_proxy</span><span class="o">=</span>bad_proxy <span class="nv">no_proxy</span><span class="o">=</span><span class="k">*</span> <span class="se">\</span>
git ls-remote &lt;remote_name or path&gt;

<span class="k">case</span> <span class="nv">$?</span> <span class="k">in
    </span>0<span class="p">)</span>
        <span class="nb">exit </span>0
        <span class="p">;;</span>
    128<span class="p">)</span>
        <span class="nb">exit </span>1
        <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>
        <span class="nb">exit </span>128
        <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div></div> <p><code class="highlighter-rouge">git bisect run sh git_test.sh</code></p> <h2 id="稀疏校验">稀疏校验</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 仅对repo启用
git config core.sparsecheckout true

# 需要checkout的文件列表
echo '*' &gt;.git/info/sparse-checkout
echo '!local.txt' &gt;&gt;.git/info/sparse-checkout

git read-tree --reset -u HEAD
# or
git reset –hard
</code></pre></div></div> <h2 id="shallow-clone">shallow clone</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone --depth 1 git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
git pull --depth 10
</code></pre></div></div> <h2 id="参考">参考</h2> <h3 id="document">document</h3> <ul> <li><a href="https://git-scm.com/docs/git-rev-parse">git-rev-parse</a></li> <li><a href="https://stackoverflow.com/questions/36260635/shallow-clone-followed-by-shallow-pull">Shallow clone followed by shallow pull</a></li> </ul> <h3 id="备份">备份</h3> <ul> <li><a href="http://blog.csdn.net/rhinocero/article/details/51213947">使用Grokmirror镜像服务）——镜像内核Git仓库</a></li> </ul> 2571 </div> --> <div class="row content"> <ul id="markdown-toc"> <li><a href="#git-hooks" id="markdown-toc-git-hooks">Git Hooks</a> <ul> <li><a href="#git-rev-parse-命令" id="markdown-toc-git-rev-parse-命令">git rev-parse 命令</a> <ul> <li><a href="#特殊符号" id="markdown-toc-特殊符号">特殊符号</a></li> </ul> </li> <li><a href="#二分查找" id="markdown-toc-二分查找">二分查找</a> <ul> <li><a href="#批处理" id="markdown-toc-批处理">批处理</a></li> </ul> </li> <li><a href="#稀疏校验" id="markdown-toc-稀疏校验">稀疏校验</a></li> <li><a href="#shallow-clone" id="markdown-toc-shallow-clone">shallow clone</a></li> <li><a href="#参考" id="markdown-toc-参考">参考</a> <ul> <li><a href="#document" id="markdown-toc-document">document</a></li> <li><a href="#备份" id="markdown-toc-备份">备份</a></li> </ul> </li> </ul> </li> </ul> <h1 id="git-hooks">Git Hooks</h1> <ul> <li>Client side <ul> <li>triggered by operations such as committing and merging</li> </ul> </li> <li>Server Side <ul> <li>triggered by network operations such as receiving pushed commits</li> </ul> </li> <li>hook language <ul> <li>ruby, python, shell, …</li> </ul> </li> <li>Creat Hook <ul> <li>目录 hooks</li> <li>客户端的hook不好管理，一般需要手动copy，可以使用grunt</li> </ul> </li> <li>Grunt is a task runner <ul> <li>可以管理 hooks</li> </ul> </li> </ul> <p>可以使用符号链接将hooks文件纳入管理</p> <p>文件必须设置可执行权限</p> <h2 id="git-rev-parse-命令">git rev-parse 命令</h2> <ul> <li><code class="highlighter-rouge">git rev-parse --git-dir</code> : 版本库.git命令所在的位置 <ul> <li><code class="highlighter-rouge">git rev-parse --git-common-dir</code> : 如果<code class="highlighter-rouge">GIT_COMMON_DIR</code>变量定义了则展示<code class="highlighter-rouge">GIT_COMMON_DIR</code>变量的值，不然则展示<code class="highlighter-rouge">GIT_DIR</code>变量的值</li> </ul> </li> <li><code class="highlighter-rouge">git rev-parse --show-toplevel</code> : 显示工作区根目录</li> <li><code class="highlighter-rouge">git rev-parse --show-prefix</code>: 显示相对于工作区根目录的相对路径</li> <li><code class="highlighter-rouge">git rev-parse --show-cdup</code> : 显示从当前目录(cd)后退(up)到工作区的根目录的深度</li> <li><code class="highlighter-rouge">git rev-parse --local-env-vars</code>: 显示git环境变量列表的本地库,只列出变量的名称，而不是它们的值</li> <li><code class="highlighter-rouge">git rev-parse --symbolic --branches</code>: 显示分支</li> <li><code class="highlighter-rouge">git rev-parse --symbolic --tags</code>: 显示 TAG</li> <li> <p><code class="highlighter-rouge">git rev-parse HEAD</code>: 显示HEAD提交的SHA1值</p> </li> <li><code class="highlighter-rouge">git rev-parse &lt;branch&gt;</code></li> <li><code class="highlighter-rouge">git rev-parse HEAD</code></li> <li><code class="highlighter-rouge">git rev-parse HEAD~5</code></li> </ul> <h3 id="特殊符号">特殊符号</h3> <p><code class="highlighter-rouge">git log --graph --oneline</code></p> <ul> <li><code class="highlighter-rouge">&lt;rev&gt;~&lt;n&gt;</code> 用来表示一个提交的第 n 个祖先提交，如果不指定 n，那么默认为 1 <ul> <li><code class="highlighter-rouge">HEAD~~~</code> 和 <code class="highlighter-rouge">HEAD~3</code> 是等价的</li> </ul> </li> <li><code class="highlighter-rouge">&lt;rev&gt;^&lt;n&gt;</code> 用来表示一个提交的第 n 个父提交，如果不指定 n，那么默认为 1 <ul> <li><code class="highlighter-rouge">HEAD^^^</code> 并不等价于 <code class="highlighter-rouge">HEAD^3</code>，而是等价与 <code class="highlighter-rouge">HEAD^1^1^1</code></li> </ul> </li> <li><code class="highlighter-rouge">git rev-parse HEAD</code> <ul> <li><code class="highlighter-rouge">git rev-parse HEAD~0</code></li> </ul> </li> <li><code class="highlighter-rouge">git rev-parse HEAD~1</code></li> </ul> <p>如果节点有多个父节点，<code class="highlighter-rouge">~</code> 只会找到第一个父提交</p> <p><code class="highlighter-rouge">~</code> 获取第一个祖先提交，<code class="highlighter-rouge">^</code> 可以获取第一个父提交</p> <p>其实第一个祖先提交就是第一个父提交，反之亦然。</p> <p>因此，当 n 为 1 时，<code class="highlighter-rouge">~</code> 和 <code class="highlighter-rouge">^</code> 其实是等价的。<code class="highlighter-rouge">HEAD~~~</code> 和 <code class="highlighter-rouge">HEAD^^^</code> 等价。</p> <ul> <li><a href="https://www.kernel.org/pub/software/scm/git/docs/git-rev-parse.html">git-rev-parse Manual Page</a></li> <li><a href="https://stackoverflow.com/questions/2221658/whats-the-difference-between-head-and-head-in-git">stackoverflow - difference between head</a></li> </ul> <h2 id="二分查找">二分查找</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git bisect start
git bisect good &lt;good_tag&gt;
git bisect bad &lt;bad_tag&gt;
</code></pre></div></div> <ul> <li>当完成对一个好版本和一个坏版本的标记后，Git 切换到一个中间版本</li> <li>测试</li> <li>根据结果标记 good or bad</li> </ul> <h3 id="批处理">批处理</h3> <ul> <li>正确执行的返回值是 0</li> <li>错误执行的返回值是 128</li> </ul> <p>git_test.sh</p> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c">#!/bin/sh</span>

make <span class="nt">-j8</span> <span class="o">&amp;&amp;</span> make <span class="nb">install</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
git <span class="nt">--version</span> <span class="o">&amp;&amp;</span> <span class="se">\</span>
<span class="nv">http_proxy</span><span class="o">=</span>bad_proxy <span class="nv">no_proxy</span><span class="o">=</span><span class="k">*</span> <span class="se">\</span>
git ls-remote &lt;remote_name or path&gt;

<span class="k">case</span> <span class="nv">$?</span> <span class="k">in
    </span>0<span class="p">)</span>
        <span class="nb">exit </span>0
        <span class="p">;;</span>
    128<span class="p">)</span>
        <span class="nb">exit </span>1
        <span class="p">;;</span>
    <span class="k">*</span><span class="p">)</span>
        <span class="nb">exit </span>128
        <span class="p">;;</span>
<span class="k">esac</span>
</code></pre></div></div> <p><code class="highlighter-rouge">git bisect run sh git_test.sh</code></p> <h2 id="稀疏校验">稀疏校验</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code># 仅对repo启用
git config core.sparsecheckout true

# 需要checkout的文件列表
echo '*' &gt;.git/info/sparse-checkout
echo '!local.txt' &gt;&gt;.git/info/sparse-checkout

git read-tree --reset -u HEAD
# or
git reset –hard
</code></pre></div></div> <h2 id="shallow-clone">shallow clone</h2> <div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>git clone --depth 1 git://git.kernel.org/pub/scm/linux/kernel/git/torvalds/linux.git
git pull --depth 10
</code></pre></div></div> <h2 id="参考">参考</h2> <h3 id="document">document</h3> <ul> <li><a href="https://git-scm.com/docs/git-rev-parse">git-rev-parse</a></li> <li><a href="https://stackoverflow.com/questions/36260635/shallow-clone-followed-by-shallow-pull">Shallow clone followed by shallow pull</a></li> </ul> <h3 id="备份">备份</h3> <ul> <li><a href="http://blog.csdn.net/rhinocero/article/details/51213947">使用Grokmirror镜像服务）——镜像内核Git仓库</a></li> </ul> <div class="col-sm-2 image pull-right"> <img class="avatar-img avata" style='border="0";border-radius: 50%' src="http://www.forbackup.tk/assets/img/author/blog.svg" alt="" height="32px" width="32px"> </div> </div> <ul class="pager"> <li><a href="/general/2018/01/01/git-command.html">git 常用命令</a></li> <li><a href="/general/2018/01/02/centos-fdisk.html">centos7分区 格式化挂载磁盘</a></li> </ul> </article> </div> </div> </div> <div class="footer"> <div class="container-fluid"> <div class="row-fluid"> <div class="col-sm-4 copyright"> <span>Vicky's Blog © 2018 • All right reserved.</span> </div> <div class="col-sm-4 message"> <span>Simplicity is fashionable.</span> </div> <div class="col-sm-4 madeby"> <span>Made with&nbsp;<a href="https://jekyllrb.com" target="_blank">Jekyll</a>&nbsp;by&nbsp;Vicky.</span> </div> <a class="pull-right top" href="#top"><i class="fa fa-caret-up" aria-hidden="true"></i></a> </div> </div> </div> </div> <!-- Vendor - Global | Applicable to every website --> <!-- #### VENDOR OFFLINE #### --> <script src="http://www.forbackup.tk/assets/vendor-off/jquery/js/jquery.min.js"></script> <script src="http://www.forbackup.tk/assets/vendor-off/bootstrap/js/bootstrap.min.js"></script> <script defer src="http://www.forbackup.tk/assets/vendor-off/font-awesome/svg-with-js/js/fontawesome-all.min.js"></script> <script src="http://www.forbackup.tk/assets/javascripts/jekyll-spotify-plugin.min.js"></script> <!-- Specific for each pages. --> <script type="text/javascript" src="http://www.forbackup.tk/assets/javascripts/post.js"></script> <!-- Add 'ga' function from Google Analytics to certain site links in Posts --> <!-- App | Global --> <script src="http://www.forbackup.tk/assets/javascripts/global.js"></script> </body> </html>
